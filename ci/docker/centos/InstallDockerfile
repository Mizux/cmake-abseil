FROM centos:latest
LABEL maintainer="corentinl@google.com"

RUN yum -y update \
&& yum -y groupinstall "Development Tools" \
&& yum -y install epel-release \
&& yum install -y cmake3 \
&& ln -s /usr/bin/cmake3 /usr/local/bin/cmake \
&& yum clean all \
&& rm -rf /var/cache/yum

# need recent git to avoid 'user not in passwd' issue
# see: https://stackoverflow.com/questions/20271926/git-error-unable-to-look-up-current-user-in-the-passwd-file-no-such-user-wh
RUN yum -y install \
http://opensource.wandisco.com/centos/7/git/x86_64/wandisco-git-release-7-1.noarch.rpm \
&& yum install git \
&& yum clean all \
&& rm -rf /var/cache/yum

COPY install /
